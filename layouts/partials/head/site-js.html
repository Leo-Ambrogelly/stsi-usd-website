<!-- Vendor JS -->
{{- $alpine := resources.Get "js/vendor/alpinejs/dist/cdn.min.js" }}
{{- $collapse := resources.Get "js/vendor/collapse/dist/cdn.min.js" }}
{{- $persist := resources.Get "js/vendor/persist/dist/cdn.min.js" }}
{{- $search := resources.Get "js/search.js" }}

<!-- Combine JS -->
{{- $js := slice $persist $collapse $search $alpine | resources.Concat "js/main.js" }}
{{- $js_min := $js | resources.Minify }}
<script>window.__BASE_URL__ = '{{ "/" | relURL }}';</script>
<script>
  const pf = document.createElement('script');
  pf.type = 'module';
  pf.defer = true;
  pf.src = '{{ "/pagefind/pagefind.js" | absURL }}';
  pf.onerror = () => {
    const cdn = document.createElement('script');
    cdn.type = 'module';
    cdn.defer = true;
    cdn.src = 'https://cdn.pagefind.app/pagefind.js';
    document.head.appendChild(cdn);
  };
  document.head.appendChild(pf);
</script>
<script defer src="{{ $js_min.RelPermalink }}"></script>
